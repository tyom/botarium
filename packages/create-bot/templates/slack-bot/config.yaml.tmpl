# {{botNamePascal}} Bot Configuration
# This is the single source of truth for bot settings and Slack app config.
# The schema metadata enables dynamic UI generation in the simulator.

# Simulator-specific configuration (not sent to Slack)
simulator:
  id: {{packageName}}  # Isolates DM messages per-bot in the simulator

# Slack app configuration
slack:
  commands:
    - command: /{{packageName}}
      description: Interact with {{botNamePascal}}
      usage_hint: '[command]'
  shortcuts: []
  actions:
    command_select: {{packageName}}_command_select
  modals: {}

# Settings with schema metadata for UI generation
settings:
  # Bot Configuration
  bot_name:
    value: {{botNamePascal}}
    schema:
      type: string
      label: Bot Name
      description: Display name for the bot in conversations
      group: bot
      required: true
{{#if isAi}}

  bot_personality:
    value: |
      Helpful AI assistant that responds concisely and helpfully.
    schema:
      type: text
      label: Bot Personality
      description: System prompt describing how the bot should behave
      group: bot

  # AI Provider
  ai_provider:
    env: AI_PROVIDER
    value: openai
    schema:
      type: select
      label: AI Provider
      group: ai
      required: true
      options:
        - value: openai
          label: OpenAI
        - value: anthropic
          label: Anthropic
        - value: google
          label: Google
        - value: openrouter
          label: OpenRouter

  # API Keys (secrets from env vars)
  openai_api_key:
    env: OPENAI_API_KEY
    schema:
      type: secret
      label: OpenAI API Key
      group: ai
  anthropic_api_key:
    env: ANTHROPIC_API_KEY
    schema:
      type: secret
      label: Anthropic API Key
      group: ai
  google_api_key:
    env: GOOGLE_API_KEY
    schema:
      type: secret
      label: Google API Key
      group: ai
  openrouter_api_key:
    env: OPENROUTER_API_KEY
    schema:
      type: secret
      label: OpenRouter API Key
      group: ai

  model_default:
    env: MODEL_DEFAULT
    schema:
      type: model_select
      label: Default Model
      description: Override the default model for this bot
      group: ai
      tier: default
      provider_field: ai_provider

  context_history_limit:
    env: CONTEXT_HISTORY_LIMIT
    value: 20
    schema:
      type: number
      label: Context History Limit
      description: Maximum messages to include in AI context (0 = none, max 100)
      group: ai
      min: 0
      max: 100
{{/if}}

# Group definitions with display order
groups:
{{#if isAi}}
  - id: ai
    label: AI Provider
    order: 1
    expanded: true  # Show AI settings expanded in bot settings
{{/if}}
  - id: bot
    label: Bot Configuration
    order: {{#if isAi}}2{{else}}1{{/if}}
    collapsible: true
    expanded: true
